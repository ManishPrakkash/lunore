# Render Blueprint for Lunoré Backend API
# Backend-only deployment configuration

services:
  # ============================================
  # BACKEND SERVICE (Node.js/Express API)
  # ============================================
  - type: web
    name: lunore-backend
    runtime: node
    region: singapore
    plan: free
    rootDir: server
    buildCommand: npm install
    startCommand: npm start
    healthCheckPath: /api/health
    
    # Environment variables for backend
    envVars:
      - key: NODE_ENV
        value: production
      
      - key: PORT
        value: 10000
      
      # MongoDB Connection String (Add in Render Dashboard)
      - key: MONGODB_URI
        sync: false
      
      # JWT Secret (Add in Render Dashboard)
      - key: JWT_SECRET
        sync: false
      
      # CORS Origin - Allow all origins or specify your frontend URL
      - key: CORS_ORIGIN
        value: "*"

    # Auto-deploy on git push
    autoDeploy: true

# ============================================
# DEPLOYMENT STEPS:
# ============================================
# 1. Push this file to your GitHub repository root
# 2. Go to Render Dashboard → New → Blueprint
# 3. Connect your GitHub repository
# 4. Add these environment variables in Render Dashboard:
#    - MONGODB_URI: mongodb+srv://user:pass@cluster.mongodb.net/lunore
#    - JWT_SECRET: (generate with: openssl rand -base64 32)
# 5. Your backend API will be live at: https://lunore-backend.onrender.com
